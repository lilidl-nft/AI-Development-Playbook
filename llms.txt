# AI & Development Playbook Context

## Repository Purpose
This repository defines the mandatory coding standards, architectural patterns, and project templates for the organization. AI agents MUST adhere to these rules when generating code.

## 1. Python Standards (Ref: guides/python_best_practices.md)
- **Stack**: Python 3.11+, FastAPI, Pydantic (Settings), pytest, uv (dependency management).
- **Style**: PEP 8 compliance via `ruff`.
- **Typing**: Pragmatic strictness. Function signatures MUST be typed. Use `mypy`.
- **Structure**: `src/{package_name}/` layout. No flat layouts.
- **Philosophy**: "Zen of Python". Explicit > Implicit. Flat > Nested.
- **Async**: Async by default for I/O.

## 2. API Design (Ref: guides/api_rules.md)
- **Format**: RESTful, JSON-only.
- **Auth**: Bearer Token (JWT).
- **Versioning**: URL-based (`/api/v1/...`).
- **Response**: Standard envelopes (optional) or consistent JSON shapes.
- **Errors**: Structured error objects with codes (not just text).

## 3. Testing (Ref: guides/testing_and_dod.md)
- **Pyramid**: 70% Unit (Mocked), 20% Integration, 10% E2E.
- **Tooling**: `pytest`, `pytest-mock`, `pytest-cov`.
- **Constraint**: Business logic MUST be unit tested.
- **Coverage**: >80% required.

## 4. Architecture (Ref: architecture/)
- **RAG**: Clean data first. Hybrid search (Keyword+Vector). Re-ranking is mandatory.
- **MCP**: Tools must be atomic, safe, and self-describing.

## 5. Templates (Ref: templates/)
- **Python Starter**: Use `templates/python-starter` for new generic services.

## 6. Critical Constraints
- **NO**: Conda, plain `requirements.txt` (unless generated), unstructured logging in prod, secrets in code.
- **YES**: `uv`, `pydantic-settings`, structured logging, health checks.
